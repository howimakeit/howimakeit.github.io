<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }} | {{ site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/archive.css' | relative_url }}">
</head>

<body>
  <div class="stars"></div>
  <div class="stars2"></div>
  <div class="stars3"></div>
  <header>
    <nav>
      <ul>
        <li><a href="{{ '/' | relative_url }}">Home</a></li>
        <li><a href="{{ '/archive/' | relative_url }}">Archive</a></li>
      </ul>
    </nav>
  </header>

  <main class="archive-container">
    {% assign posts_by_year = site.posts | group_by_exp:"post", "post.date | date: '%Y'" %}
    {% for year in posts_by_year %}
    <div class="archive-year">{{ year.name }}</div>
    {% assign posts_by_month = year.items | group_by_exp:"post", "post.date | date: '%B'" %}
    {% for month in posts_by_month %}
    <div class="archive-month">{{ month.name }}</div>
    <div class="archive-posts">
      {% for post in month.items %}
      <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
      {% endfor %}
    </div>
    {% endfor %}
    {% endfor %}
  </main>



  <footer>
    &copy; {{ site.time | date: '%Y' }} {{ site.title }}
  </footer>

  <script>
    // 点击年份显示/隐藏月份
    document.querySelectorAll(".archive-year").forEach(year => {
      year.addEventListener("click", () => {
        let next = year.nextElementSibling;
        while (next && !next.classList.contains('archive-year')) {
          if (next.classList.contains('archive-month')) {
            next.style.display = (next.style.display === 'block') ? 'none' : 'block';
          }
          next = next.nextElementSibling;
        }
      });
    });

    // 点击月份显示/隐藏文章列表
    document.querySelectorAll(".archive-month").forEach(month => {
      month.addEventListener("click", () => {
        const posts = month.nextElementSibling;
        if (posts && posts.classList.contains('archive-posts')) {
          posts.style.display = (posts.style.display === 'block') ? 'none' : 'block';
        }
      });
    });
  </script>


</body>

</html>